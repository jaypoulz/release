ref:
  as: upi-libvirt-install
  from: libvirt-installer
  commands: upi-libvirt-install-commands.sh
  env:
  - name: ARCH
  - name: BRANCH
  - name: COMPUTE_COUNT
    default: '2'
  - name: CONTROL_COUNT
    default: '3'
  - name: DOMAIN_MEMORY
    documentation: The memory to allocate for each guest, in MiB
    default: '24567'
  - name: DOMAIN_VCPUS
    documentation: Number of VCPUs to allocate for each guest
    default: '6'
  - name: LIBVIRT_IMAGE_PATH
    default: '/var/lib/libvirt/openshift-images'
  - name: POOL_NAME
    default: 'multiarch-ci-pool'
  - name: VOLUME_CAPACITY
    default: '40G'
  - name: YQ_VERSION
    default: '4.40.2'
  resources:
    requests:
      cpu: 10m
      memory: 100Mi
  dependencies:
    - name: "release:latest"
      env: OPENSHIFT_INSTALL_RELEASE_IMAGE_OVERRIDE
  dnsConfig:
    nameservers:
    - 172.30.38.188
    searches:
    - "bastion-z.svc.cluster.local"
    - "bastion-ppc64le-libvirt.svc.cluster.local"
  documentation: >-
    The UPI libvirt install step runs the openshift-install in order to bring up an OpenShift cluster via a remote libvirt configuration with a fixed load balancer.